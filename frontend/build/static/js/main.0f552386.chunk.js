(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{25:function(e,t,n){},40:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),c=n(34),a=n.n(c),o=(n(40),n(9)),i=n(10),j=n(12),l=n(11),u=n(0),h=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:["\u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b \xa9\xa02021 ",Object(u.jsx)("a",{href:"https://geekbrains.ru",target:"_blank",children:"Geekbrains"})]})})}}]),n}(r.a.Component),d=h,b=(n(25),n(5)),p=n(2),O=n(13),x=n.n(O),f=function(e){var t=e.user;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.id}),Object(u.jsx)("td",{children:t.username}),Object(u.jsx)("td",{children:t.first_name}),Object(u.jsx)("td",{children:t.last_name}),Object(u.jsx)("td",{children:t.email})]})},m=function(e){var t=e.users;return Object(u.jsxs)("table",{children:[Object(u.jsx)("caption",{className:"CaptionTable",children:"Users"}),Object(u.jsxs)("thead",{children:[Object(u.jsx)("th",{children:"Id"}),Object(u.jsx)("th",{children:"Username"}),Object(u.jsx)("th",{children:"First name"}),Object(u.jsx)("th",{children:"Last Name"}),Object(u.jsx)("th",{children:"E-mail"})]}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsx)(f,{user:e})}))})]})},v=function(e){var t=e.project,n=e.deleteProject;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsxs)(b.b,{to:"".concat(t.id),children:[" ",t.name," "]})}),Object(u.jsx)("td",{children:t.rep_link}),Object(u.jsx)("td",{children:t.users}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},g=function(e){var t=e.projects,n=e.deleteProject;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("caption",{className:"CaptionTable",children:"Projects"}),Object(u.jsx)("th",{children:"Project name"}),Object(u.jsx)("th",{children:"Project link"}),Object(u.jsx)("th",{children:"Users"}),t.map((function(e){return Object(u.jsx)(v,{project:e,deleteProject:n})}))]}),Object(u.jsx)(b.b,{to:"/projects/create",children:"Create"})]})},k=function(e){var t=e.project,n=e.users,s=e.todos,r=[];return s.forEach((function(e){e.project===parseInt(t.id)&&r.push(e.text)})),Object(u.jsx)("div",{children:Object(u.jsxs)("table",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:"Project:"})}),Object(u.jsx)("td",{children:t.name})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:"Repository link:"})}),Object(u.jsxs)("td",{children:[" ",t.rep_link]})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:"Users:"})}),Object(u.jsxs)("td",{children:[" ",t.users.map((function(e){return n.find((function(t){return t.id===e})).username+", "}))]})]}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("b",{children:"ToDo:"})}),Object(u.jsxs)("td",{children:[" ",r.map((function(e){return e+", "}))]})]})]})})},_=function(e){var t=e.projects,n=e.users,s=e.todos,r=Object(p.g)().id;console.log(n);var c=t.filter((function(e){return e.id===parseInt(r)}));return Object(u.jsx)("div",{children:c.map((function(e){return Object(u.jsx)(k,{project:e,users:n,todos:s})}))})},y=n(15),C=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={name:"",rep_link:"http://github.com/",users:[]},s}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.rep_link,this.state.users),console.log(this.state.name+" "+this.state.rep_link+" "+this.state.users),e.preventDefault()}},{key:"handleUserChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"name",children:"name"}),Object(u.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"rep_link",children:"repository link"}),Object(u.jsx)("input",{type:"url",className:"form-control",name:"rep_link",value:this.state.rep_link,onChange:function(t){return e.handleChange(t)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"users",children:"users"}),Object(u.jsx)("select",{name:"users",multiple:!0,onChange:function(t){return e.handleUserChange(t)},children:this.props.users.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(u.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(r.a.Component),S=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={project:0,text:"",user:0},s}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createToDo(this.state.project,this.state.text,this.state.user),console.log(this.state.project+" "+this.state.text+" "+this.state.user),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"project",children:"project"}),Object(u.jsx)("select",{name:"project",className:"form-control",onChange:function(t){return e.handleChange(t)},children:this.props.projects.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.name})}))})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"user",children:"user"}),Object(u.jsx)("select",{name:"user",className:"form-control",onChange:function(t){return e.handleChange(t)},children:this.props.users.map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"text",children:"text"}),Object(u.jsx)("input",{type:"text",className:"form-control",name:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}})]}),Object(u.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(r.a.Component),N=function(e){var t=e.todo,n=e.deleteToDo;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.project}),Object(u.jsx)("td",{children:t.text}),Object(u.jsx)("td",{children:!0===t.is_active?"+":"-"}),Object(u.jsx)("td",{children:t.date_create}),Object(u.jsx)("td",{children:t.date_update}),Object(u.jsx)("td",{children:t.user}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},T=function(e){var t=e.todos,n=e.deleteToDo;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("caption",{className:"CaptionTable",children:"ToDo"}),Object(u.jsx)("th",{children:"Project"}),Object(u.jsx)("th",{children:"Text"}),Object(u.jsx)("th",{children:"Is active"}),Object(u.jsx)("th",{children:"Create date"}),Object(u.jsx)("th",{children:"Update date"}),Object(u.jsx)("th",{children:"User"}),Object(u.jsx)("th",{}),t.map((function(e){return Object(u.jsx)(N,{todo:e,deleteToDo:n})}))]}),Object(u.jsx)(b.b,{to:"/todos/create",children:"Create"})]})},D=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={login:"",password:""},s}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("form",{className:"LoginForm",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(u.jsx)("input",{className:"InputLogin",type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(u.jsx)("input",{className:"InputLogin",type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(u.jsx)("input",{className:"InputLogin",type:"submit",value:"Login"})]})}}]),n}(r.a.Component),P=n(20),w=function(e){var t=e.location;return Object(u.jsx)("div",{children:Object(u.jsxs)("h1",{children:["\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",t.pathname,"' \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]})})},F=function(e){Object(j.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={users:[],projects:[],todos:[],curr_user:""},s}return Object(i.a)(n,[{key:"set_token",value:function(e){var t=this;(new P.a).set("token",e),this.setState({token:e},(function(){return t.load_data()}))}},{key:"set_name",value:function(e){(new P.a).set("curr_user",e),this.setState({curr_user:e})}},{key:"is_authenticated",value:function(){return!!this.state.token}},{key:"logout",value:function(){this.set_token(""),this.state.curr_user=""}},{key:"get_token_from_storage",value:function(){var e=this,t=new P.a,n=t.get("token"),s=t.get("curr_user");this.setState({token:n},(function(){return e.load_data()})),this.setState({curr_user:s})}},{key:"get_token",value:function(e,t){var n=this;x.a.post("http://127.0.0.1:8000/api-token-auth/",{username:e,password:t}).then((function(t){n.set_token(t.data.token),alert("Nice to meet you, "+e),n.set_name(e)})).catch((function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"};return this.is_authenticated()&&(e.Authorization="Token "+this.state.token),e}},{key:"load_data",value:function(){var e=this,t=this.get_headers();x.a.get("http://127.0.0.1:8000/api/users",{headers:t}).then((function(t){var n=t.data;e.setState({users:n})})).catch((function(e){return console.log(e)})),this.setState({users:[]}),x.a.get("http://127.0.0.1:8000/api/filters/project/",{headers:t}).then((function(t){var n=t.data;e.setState({projects:n})})).catch((function(e){return console.log(e)})),this.setState({projects:[]}),x.a.get("http://127.0.0.1:8000/api/filters/todo/",{headers:t}).then((function(t){var n=t.data;e.setState({todos:n})})).catch((function(e){return console.log(e)})),this.setState({todos:[]})}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"deleteProject",value:function(e){var t=this,n=this.get_headers();x.a.delete("http://127.0.0.1:8000/api/filters/project/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){console.log(e),t.setState({projects:[]})}))}},{key:"createProject",value:function(e,t,n){var s=this,r=this.get_headers(),c={name:e,rep_link:t,users:n};x.a.post("http://127.0.0.1:8000/api/filters/project/",c,{headers:r}).then((function(e){s.load_data()})).catch((function(e){console.log(e),s.setState({projects:[]})}))}},{key:"deleteToDo",value:function(e){var t=this,n=this.get_headers();x.a.delete("http://127.0.0.1:8000/api/filters/todo/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){return console.log(e)}))}},{key:"createToDo",value:function(e,t,n){var s=this,r=this.get_headers(),c={project:e,text:t,user:n};x.a.post("http://127.0.0.1:8000/api/filters/todo/",c,{headers:r}).then((function(e){s.load_data()})).catch((function(e){console.log(e),s.setState({todos:[]})}))}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"App Site",children:[Object(u.jsx)("div",{className:"Site-content",children:Object(u.jsxs)(b.a,{children:[Object(u.jsx)("div",{className:"App-header",children:Object(u.jsxs)("nav",{children:[Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)(b.b,{to:"/",children:"Users"})}),Object(u.jsx)("li",{children:Object(u.jsx)(b.b,{to:"/projects/",children:"Projects"})}),Object(u.jsx)("li",{children:Object(u.jsx)(b.b,{to:"/todos/",children:"ToDo"})}),Object(u.jsx)("li",{children:this.is_authenticated()?Object(u.jsx)(b.b,{onClick:function(){return e.logout()},children:"Logout"}):Object(u.jsx)(b.b,{to:"/login",children:"Login"})})]}),this.is_authenticated()?Object(u.jsxs)("text",{className:"Text-user",children:[" Current user is: ",this.state.curr_user]}):Object(u.jsx)("text",{className:"Text-user",children:" Current user is: Anonymous User"})]})}),Object(u.jsx)("div",{className:"main",children:Object(u.jsx)("content",{children:Object(u.jsxs)(p.d,{children:[Object(u.jsx)(p.b,{exact:!0,path:"/",component:function(){return Object(u.jsx)(m,{users:e.state.users})}}),Object(u.jsx)(p.a,{from:"/users/",to:"/"}),Object(u.jsx)(p.b,{exact:!0,path:"/todos/",component:function(){return Object(u.jsx)(T,{todos:e.state.todos,deleteToDo:function(t){return e.deleteToDo(t)}})}}),Object(u.jsx)(p.b,{exact:!0,path:"/todos/create",component:function(){return Object(u.jsx)(S,{users:e.state.users,projects:e.state.projects,createToDo:function(t,n,s){return e.createToDo(t,n,s)}})}}),Object(u.jsx)(p.b,{exact:!0,path:"/projects/",component:function(){return Object(u.jsx)(g,{projects:e.state.projects,deleteProject:function(t){return e.deleteProject(t)}})}}),Object(u.jsx)(p.b,{exact:!0,path:"/projects/create",component:function(){return Object(u.jsx)(C,{users:e.state.users,createProject:function(t,n,s){return e.createProject(t,n,s)}})}}),Object(u.jsx)(p.b,{exact:!0,path:"/projects/:id",component:function(){return Object(u.jsx)(_,{projects:e.state.projects,users:e.state.users,todos:e.state.todos})}}),Object(u.jsx)(p.b,{exact:!0,path:"/login",component:function(){return Object(u.jsx)(D,{get_token:function(t,n){return e.get_token(t,n)}})}}),Object(u.jsx)(p.b,{component:w})]})})})]})}),Object(u.jsx)("footer",{className:"App-footer",children:Object(u.jsx)(d,{})})]})}}]),n}(r.a.Component),L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(F,{})}),document.getElementById("root")),L()}},[[68,1,2]]]);
//# sourceMappingURL=main.0f552386.chunk.js.map